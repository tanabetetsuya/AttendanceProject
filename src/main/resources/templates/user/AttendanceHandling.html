<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>勤務入力</title></head>
<body>
    <h2>勤務時間</h2>

	<p th:if="${user != null}">ログイン中: <span th:text="${user.name}"></span></p>
	<p th:if="${user == null}">ユーザ名情報が取得できません</p>
	<p th:if="${user != null}">ユーザID: <span th:text="${user.id}"></span></p>
	<p th:if="${user == null}">ユーザID情報が取得できません</p>
	
	<table border="1">
	    <tr>
			<th>ID</th>
	        <th>日付</th>
	        <th>出勤時間</th>
	        <th>退勤時間</th>
			<th>休憩開始時間</th>
			<th>休憩終了時間</th>
			<th>勤務時間</th>
			<th>残業時間</th>
	        <th>備考</th>
	    </tr>
	    <tr th:each="r : ${records}">
			<td th:text="${r.timerecordId}"></td>
	        <td th:text="${r.date}"></td>
	        <td th:text="${r.startTime}"></td>
	        <td th:text="${r.finishTime}"></td>
			<td th:text="${r.startBreakTime}"></td>
			<td th:text="${r.finishBreakTime}"></td>
			<td th:text="${r.workDurationString != null ? r.workDurationString : '00:00'}"></td>
			<td th:text="${r.overtimeString}"></td>
	        <td th:text="${r.bikou}"></td>
			<td>
				<form th:action="@{/user/StampingCorrectionForm/{recordId}/{userId}(recordId=${r.timerecordId}, userId=${user.id})}" method="get">
					<button type="submit">修正申請</button>
				</form>
			</td>
	    </tr>
	</table>
	
	<h3>勤務時間入力</h3>
		<form th:action="@{/user/{id}/save(id=${user.id})}" method="post">
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
		    <input type="hidden" name="userId" th:value="${user.id}">
		    日付: <input type="date" name="date" required><br>
		    出勤: <input type="time" name="startTime" required><br>
			休憩開始: <input type="time" name="startBreakTime" required><br>
			休憩終了: <input type="time" name="finishBreakTime" required><br>
		    退勤: <input type="time" name="finishTime" required><br>
	    	備考:
	    <select name="bikou" required>
	        <option value="通常出勤">通常出勤</option>
	        <option value="時差出勤">時差出勤</option>
	        <option value="遅刻">遅刻</option>
	        <option value="早退">早退</option>
	        <option value="休暇">休暇</option>
	    </select><br>

		    <button type="submit">登録</button>
		</form>
	<a href="#" th:href="@{/user/logout}" th:attr="data-method='post'">ログアウト</a>
	<form th:action="@{/user/edit/{id}(id=${user.id})}" method="get">
		<button type="submit">ログイン情報編集</button>
	</form>
</body>
</html>